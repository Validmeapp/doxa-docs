---
title: "API de Webhooks"
description: "Configura y gestiona endpoints de webhook para notificaciones de eventos en tiempo real"
version: "v1"
locale: "es"
order: 2
tags: ["api", "webhooks", "eventos"]
---

# API de Webhooks

La API de Webhooks te permite configurar endpoints para recibir notificaciones automáticas cuando ocurren eventos específicos en tu aplicación.

## URL Base

```
https://api.example.com/v1/webhooks
```

## Autenticación

Todos los endpoints de webhooks requieren autenticación mediante token Bearer.

```http
Authorization: Bearer tu_token_aqui
```

## Endpoints Disponibles

### Crear Webhook

Crea un nuevo webhook para recibir notificaciones de eventos.

```http
POST /webhooks
```

**Parámetros del cuerpo:**

```json
{
  "url": "https://tu-sitio.com/webhook",
  "events": ["user.created", "user.updated"],
  "secret": "tu_secreto_opcional"
}
```

**Respuesta exitosa (201):**

```json
{
  "id": "webhook_123",
  "url": "https://tu-sitio.com/webhook",
  "events": ["user.created", "user.updated"],
  "secret": "tu_secreto_opcional",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

### Listar Webhooks

Obtiene todos los webhooks configurados.

```http
GET /webhooks
```

**Respuesta exitosa (200):**

```json
{
  "webhooks": [
    {
      "id": "webhook_123",
      "url": "https://tu-sitio.com/webhook",
      "events": ["user.created", "user.updated"],
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T10:30:00Z"
    }
  ],
  "total": 1
}
```

### Obtener Webhook

Obtiene los detalles de un webhook específico.

```http
GET /webhooks/{webhook_id}
```

**Respuesta exitosa (200):**

```json
{
  "id": "webhook_123",
  "url": "https://tu-sitio.com/webhook",
  "events": ["user.created", "user.updated"],
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

### Actualizar Webhook

Actualiza un webhook existente.

```http
PUT /webhooks/{webhook_id}
```

**Parámetros del cuerpo:**

```json
{
  "url": "https://nuevo-sitio.com/webhook",
  "events": ["user.created", "user.deleted"]
}
```

### Eliminar Webhook

Elimina un webhook.

```http
DELETE /webhooks/{webhook_id}
```

**Respuesta exitosa (204):** Sin contenido

## Eventos Disponibles

Los siguientes eventos están disponibles para suscripción:

- `user.created` - Se crea un nuevo usuario
- `user.updated` - Se actualiza un usuario existente
- `user.deleted` - Se elimina un usuario
- `payment.completed` - Se completa un pago
- `payment.failed` - Falla un pago

## Formato de Payload

Cuando ocurre un evento, se enviará una solicitud POST a tu URL de webhook con el siguiente formato:

```json
{
  "event": "user.created",
  "timestamp": "2024-01-15T10:30:00Z",
  "data": {
    "id": "user_123",
    "email": "usuario@ejemplo.com",
    "name": "Juan Pérez"
  }
}
```

## Verificación de Firma

Si proporcionas un secreto al crear el webhook, cada payload incluirá una firma HMAC-SHA256 en el header `X-Webhook-Signature`.

```javascript
const crypto = require('crypto');

function verificarFirma(payload, firma, secreto) {
  const firmaEsperada = crypto
    .createHmac('sha256', secreto)
    .update(payload)
    .digest('hex');
  
  return firma === `sha256=${firmaEsperada}`;
}
```

## Códigos de Error

- `400` - Solicitud inválida
- `401` - No autorizado
- `404` - Webhook no encontrado
- `422` - Datos de entrada inválidos
- `500` - Error interno del servidor