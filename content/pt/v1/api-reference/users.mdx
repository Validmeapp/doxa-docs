---
title: "API de Usu치rios"
description: "Gerencie contas de usu치rio e perfis com opera칞칫es CRUD completas"
version: "v1"
locale: "pt"
order: 1
tags: ["api", "usu치rios", "crud"]
---

# API de Usu치rios

A API de Usu치rios permite gerenciar contas de usu치rio e perfis na sua aplica칞칚o. Esta API fornece opera칞칫es CRUD completas com recursos avan칞ados de filtragem, pagina칞칚o e busca.

## URL Base

```
https://api.example.com/v1/users
```

## Autentica칞칚o

Todos os endpoints requerem autentica칞칚o via chave de API ou token OAuth 2.0.

```bash
Authorization: Bearer SUA_CHAVE_API
```

## Endpoints

### GET /users

Obt칠m uma lista paginada de usu치rios com filtragem opcional.

#### Par칙metros

| Par칙metro | Tipo | Obrigat칩rio | Descri칞칚o |
|-----------|------|-------------|-----------|
| `page` | integer | N칚o | N칰mero da p치gina (padr칚o: 1) |
| `limit` | integer | N칚o | Itens por p치gina (padr칚o: 20, m치x: 100) |
| `search` | string | N칚o | Buscar usu치rios por nome ou email |
| `status` | string | N칚o | Filtrar por status: `active`, `inactive`, `pending` |
| `created_after` | string | N칚o | Filtro de data ISO 8601 |

#### Exemplo de Solicita칞칚o

```bash
curl -X GET "https://api.example.com/v1/users?page=1&limit=10&status=active" \
  -H "Authorization: Bearer SUA_CHAVE_API" \
  -H "Content-Type: application/json"
```

#### Exemplo de Resposta

```json
{
  "data": [
    {
      "id": "usr_1234567890",
      "email": "joao.silva@exemplo.com",
      "first_name": "Jo칚o",
      "last_name": "Silva",
      "status": "active",
      "created_at": "2024-01-15T10:30:00Z",
      "updated_at": "2024-01-15T10:30:00Z",
      "profile": {
        "avatar_url": "https://exemplo.com/avatars/joao.jpg",
        "phone": "+5511987654321",
        "timezone": "America/Sao_Paulo"
      }
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 150,
    "total_pages": 15
  }
}
```

### POST /users

Cria uma nova conta de usu치rio com verifica칞칚o por email.

#### Corpo da Solicita칞칚o

```json
{
  "email": "maria.santos@exemplo.com",
  "first_name": "Maria",
  "last_name": "Santos",
  "password": "SenhaSegura123!",
  "profile": {
    "phone": "+5511123456789",
    "timezone": "America/Sao_Paulo"
  },
  "send_welcome_email": true
}
```

#### Exemplo de Solicita칞칚o

```javascript
const response = await fetch('https://api.example.com/v1/users', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer SUA_CHAVE_API',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    email: 'maria.santos@exemplo.com',
    first_name: 'Maria',
    last_name: 'Santos',
    password: 'SenhaSegura123!',
    profile: {
      phone: '+5511123456789',
      timezone: 'America/Sao_Paulo'
    },
    send_welcome_email: true
  })
});

const usuario = await response.json();
```

#### Exemplo de Resposta

```json
{
  "id": "usr_0987654321",
  "email": "maria.santos@exemplo.com",
  "first_name": "Maria",
  "last_name": "Santos",
  "status": "pending",
  "created_at": "2024-01-15T14:22:00Z",
  "updated_at": "2024-01-15T14:22:00Z",
  "profile": {
    "phone": "+5511123456789",
    "timezone": "America/Sao_Paulo"
  },
  "verification": {
    "email_verified": false,
    "verification_sent": true
  }
}
```

### GET /users/{id}

Obt칠m um usu치rio espec칤fico pelo seu identificador 칰nico.

#### Par칙metros de Rota

| Par칙metro | Tipo | Obrigat칩rio | Descri칞칚o |
|-----------|------|-------------|-----------|
| `id` | string | Sim | ID do usu치rio (formato: `usr_*`) |

#### Exemplo de Solicita칞칚o

```python
import requests

headers = {
    'Authorization': 'Bearer SUA_CHAVE_API',
    'Content-Type': 'application/json'
}

response = requests.get(
    'https://api.example.com/v1/users/usr_1234567890',
    headers=headers
)

usuario = response.json()
```

#### Exemplo de Resposta

```json
{
  "id": "usr_1234567890",
  "email": "joao.silva@exemplo.com",
  "first_name": "Jo칚o",
  "last_name": "Silva",
  "status": "active",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z",
  "last_login": "2024-01-20T09:15:00Z",
  "profile": {
    "avatar_url": "https://exemplo.com/avatars/joao.jpg",
    "phone": "+5511987654321",
    "timezone": "America/Sao_Paulo",
    "preferences": {
      "notifications": true,
      "marketing_emails": false
    }
  },
  "verification": {
    "email_verified": true,
    "phone_verified": true,
    "identity_verified": false
  }
}
```

### PUT /users/{id}

Atualiza as informa칞칫es de um usu치rio. Apenas os campos fornecidos ser칚o atualizados.

#### Corpo da Solicita칞칚o

```json
{
  "first_name": "Jo칚o Carlos",
  "profile": {
    "timezone": "America/Recife",
    "preferences": {
      "notifications": false
    }
  }
}
```

#### Exemplo de Solicita칞칚o

```bash
curl -X PUT "https://api.example.com/v1/users/usr_1234567890" \
  -H "Authorization: Bearer SUA_CHAVE_API" \
  -H "Content-Type: application/json" \
  -d '{
    "first_name": "Jo칚o Carlos",
    "profile": {
      "timezone": "America/Recife"
    }
  }'
```

### DELETE /users/{id}

Exclui permanentemente uma conta de usu치rio. Esta a칞칚o n칚o pode ser desfeita.

#### Par칙metros de Consulta

| Par칙metro | Tipo | Obrigat칩rio | Descri칞칚o |
|-----------|------|-------------|-----------|
| `force` | boolean | N칚o | Pular exclus칚o suave e remover permanentemente |

#### Exemplo de Solicita칞칚o

```javascript
const response = await fetch('https://api.example.com/v1/users/usr_1234567890', {
  method: 'DELETE',
  headers: {
    'Authorization': 'Bearer SUA_CHAVE_API'
  }
});

if (response.ok) {
  console.log('Usu치rio exclu칤do com sucesso');
}
```

#### Resposta

```json
{
  "message": "Usu치rio exclu칤do com sucesso",
  "deleted_at": "2024-01-20T15:30:00Z"
}
```

## Respostas de Erro

Todos os endpoints retornam respostas de erro consistentes:

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "O endere칞o de email fornecido j치 est치 em uso",
    "details": {
      "field": "email",
      "value": "joao.silva@exemplo.com"
    }
  }
}
```

### C칩digos de Erro Comuns

- `VALIDATION_ERROR` - Dados de entrada inv치lidos
- `NOT_FOUND` - Usu치rio n칚o encontrado
- `UNAUTHORIZED` - Autentica칞칚o inv치lida ou ausente
- `FORBIDDEN` - Permiss칫es insuficientes
- `RATE_LIMITED` - Muitas solicita칞칫es

## Exemplos de Integra칞칚o

### Criar e Verificar Usu치rio

```javascript
async function criarEVerificarUsuario(dadosUsuario) {
  try {
    // Passo 1: Criar usu치rio
    const response = await fetch('https://api.example.com/v1/users', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer SUA_CHAVE_API',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(dadosUsuario)
    });
    
    if (!response.ok) {
      throw new Error('Erro ao criar usu치rio');
    }
    
    const usuario = await response.json();
    console.log('Usu치rio criado:', usuario.id);
    
    // Passo 2: Configurar webhook para verifica칞칚o
    const webhook = await fetch('https://api.example.com/v1/webhooks', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer SUA_CHAVE_API',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        url: 'https://seu-app.com/webhooks/verificacao',
        events: ['user.verified'],
        description: 'Webhook para verifica칞칚o de usu치rios'
      })
    });
    
    return usuario;
  } catch (error) {
    console.error('Erro:', error.message);
    throw error;
  }
}
```

### Busca e Filtragem

```python
import requests

def buscar_usuarios(termo_busca, status=None, pagina=1):
    """
    Busca usu치rios com filtros opcionais
    """
    params = {
        'search': termo_busca,
        'page': pagina,
        'limit': 20
    }
    
    if status:
        params['status'] = status
    
    response = requests.get(
        'https://api.example.com/v1/users',
        headers={
            'Authorization': 'Bearer SUA_CHAVE_API',
            'Content-Type': 'application/json'
        },
        params=params
    )
    
    if response.status_code == 200:
        return response.json()
    else:
        raise Exception(f'Erro na busca: {response.status_code}')

# Exemplo de uso
usuarios_ativos = buscar_usuarios('jo칚o', status='active')
print(f'Encontrados {len(usuarios_ativos["data"])} usu치rios')
```

### Atualiza칞칚o em Lote

```javascript
async function atualizarUsuariosEmLote(atualizacoes) {
  const resultados = [];
  
  for (const atualizacao of atualizacoes) {
    try {
      const response = await fetch(`https://api.example.com/v1/users/${atualizacao.id}`, {
        method: 'PUT',
        headers: {
          'Authorization': 'Bearer SUA_CHAVE_API',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(atualizacao.data)
      });
      
      if (response.ok) {
        const usuario = await response.json();
        resultados.push({ id: atualizacao.id, success: true, data: usuario });
      } else {
        const error = await response.json();
        resultados.push({ id: atualizacao.id, success: false, error });
      }
    } catch (error) {
      resultados.push({ id: atualizacao.id, success: false, error: error.message });
    }
    
    // Pausa para evitar limites de taxa
    await new Promise(resolve => setTimeout(resolve, 100));
  }
  
  return resultados;
}
```

## Melhores Pr치ticas

### Pagina칞칚o Eficiente

```javascript
async function obterTodosOsUsuarios() {
  const todosOsUsuarios = [];
  let pagina = 1;
  let temMaisPaginas = true;
  
  while (temMaisPaginas) {
    const response = await fetch(`https://api.example.com/v1/users?page=${pagina}&limit=100`, {
      headers: {
        'Authorization': 'Bearer SUA_CHAVE_API',
        'Content-Type': 'application/json'
      }
    });
    
    const data = await response.json();
    todosOsUsuarios.push(...data.data);
    
    temMaisPaginas = pagina < data.pagination.total_pages;
    pagina++;
  }
  
  return todosOsUsuarios;
}
```

### Cache de Dados

```javascript
const cache = new Map();
const CACHE_TTL = 5 * 60 * 1000; // 5 minutos

async function obterUsuarioComCache(userId) {
  const cacheKey = `user_${userId}`;
  const cached = cache.get(cacheKey);
  
  if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
    return cached.data;
  }
  
  const response = await fetch(`https://api.example.com/v1/users/${userId}`, {
    headers: {
      'Authorization': 'Bearer SUA_CHAVE_API',
      'Content-Type': 'application/json'
    }
  });
  
  const usuario = await response.json();
  
  cache.set(cacheKey, {
    data: usuario,
    timestamp: Date.now()
  });
  
  return usuario;
}
```

## Webhooks Relacionados

Configure webhooks para receber notifica칞칫es sobre eventos de usu치rios:

```javascript
const eventosUsuario = [
  'user.created',    // Usu치rio criado
  'user.updated',    // Usu치rio atualizado
  'user.deleted',    // Usu치rio exclu칤do
  'user.verified',   // Usu치rio verificado
  'user.suspended'   // Usu치rio suspenso
];

const webhook = await fetch('https://api.example.com/v1/webhooks', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer SUA_CHAVE_API',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://seu-app.com/webhooks/usuarios',
    events: eventosUsuario,
    description: 'Webhook para todos os eventos de usu치rios'
  })
});
```

## Suporte

Precisa de ajuda com a API de Usu치rios?

- **Documenta칞칚o**: Consulte nosso guia completo
- **Exemplos de C칩digo**: Reposit칩rio no GitHub
- **Suporte T칠cnico**: support@example.com
- **F칩rum de Desenvolvedores**: community.example.com

Gerencie usu치rios de forma eficiente! 游논